{"version":3,"sources":["webpack:///webpack/bootstrap 2bbd596f7542c65ccd8f","webpack:///./client/player.js","webpack:///./client/game.js","webpack:///./client/game_view.js","webpack:///./client/pokemania.js","webpack:///./server/util.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA,mDAA2C,cAAc;;AAEzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;AChEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;;AC7BqB;;AAErB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AAAA;AAAA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;;;;;;;;;;;ACtCA;AACuC;;AAEvC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,oCAAoC,4CAA4C;AAChF;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,qCAAqC,kDAAkD;AACvF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;;AC7K6B;AAC7B;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,CAAC;;;;;;;ACZD;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA,mBAAmB,OAAO;AAC1B;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"./client/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 6);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 2bbd596f7542c65ccd8f","export const drawPlayer = (context, offset, data) => {\n  const img = new Image();\n  img.onload = () => {\n    drawPlayerImage(context, offset, data, img);\n  };\n  img.src = data.img;\n\n  drawPlayerImage(context, offset, data, img);\n\n  context.fillStyle = PLAYER_NAME_COLOR;\n  context.font = \"bold 14px Arial\";\n  context.fillText(\n    data.name,\n    data.pos[0] + offset[0] + data.radius,\n    data.pos[1] + offset[1]\n  );\n};\n\nconst drawPlayerImage = (context, offset, data, img) => {\n  context.drawImage(\n    img,\n    data.pos[0] + offset[0] - data.radius,\n    data.pos[1] + offset[1] - data.radius,\n    data.radius * 2,\n    data.radius * 2\n  );\n};\n\nconst NORMAL_FRAME_TIME_DELTA = 1000 / 60;\nconst PLAYER_NAME_COLOR = \"#000\";\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/player.js\n// module id = 1\n// module chunks = 0","import { drawPlayer } from './player';\n\nexport const drawGame = (context, offset, players) => {\n  context.clearRect(0, 0, CANVAS_X, CANVAS_Y);\n  context.fillStyle = BG_COLOR;\n  context.fillRect(0, 0, CANVAS_X, CANVAS_Y);\n\n  Object.values(players).forEach(player => {\n    if (!outOfCanvasBounds(player, offset)) {\n      drawPlayer(context, offset, player);\n    }\n  });\n\n  drawBorder(context, offset);\n};\n\nconst drawBorder = (context, offset) => {\n  context.strokeStyle = \"#000\";\n  context.lineWidth = BORDER_WIDTH;\n  context.strokeRect(offset[0], offset[1], DIM_X, DIM_Y);\n  context.stroke();\n};\n\nconst outOfCanvasBounds = (player, offset) => {\n  const pos = player.pos,\n    radius = player.radius;\n\n  return (pos[0] + offset[0] + radius < 0 ||\n  pos[0] + offset[0] - radius > CANVAS_X ||\n  pos[1] + offset[1] + radius < 0 ||\n  pos[1] + offset[1] - radius > CANVAS_Y);\n};\n\nconst BG_COLOR = \"#c8eafb\";\nconst BORDER_WIDTH = 7;\nconst DIM_X = 2000;\nconst DIM_Y = 2000;\nexport const CANVAS_X = 700;\nexport const CANVAS_Y = 450;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/game.js\n// module id = 2\n// module chunks = 0","import Util from '../server/util';\nimport { drawGame, CANVAS_X, CANVAS_Y } from './game';\n\nclass GameView {\n  constructor(context, socket) {\n    this.context = context;\n    this.socket = socket;\n    this.currentPlayerId = null;\n    this.playStatus = \"startScreen\";\n\n    this.setEventHandlers();\n  }\n\n  start(name) {\n    this.bindKeyHandlers();\n    this.setGameStartScreen(name);\n    this.lastTime = 0;\n    this.currentPlayerId = Util.randomId();\n    this.playStatus = \"playing\";\n\n    this.socket.emit(\"new player\", { name: this.name, id: this.currentPlayerId });\n  }\n\n  setEventHandlers() {\n    this.addStartClickListener();\n    this.addInstructionsClickListener();\n    this.addRestartClickListener();\n\n    this.socket.on(\"draw game\", this.drawGame.bind(this));\n  }\n\n  drawGame(data) {\n    if (this.playStatus === \"restartScreen\") return;\n\n    if (this.playStatus === \"playing\") {\n      if (this.resetIfLost(data)) return;\n      this.powerCurrentPlayer();\n      const offset = this.getCurrentPlayerOffset(data);\n      drawGame(this.context, offset, data);\n    }\n  }\n\n  resetIfLost(data) {\n    if (!data[this.currentPlayerId]) {\n      this.currentPlayerId = null;\n      this.setGameRestartScreen();\n      this.playStatus = \"restartScreen\";\n      return true;\n    }\n\n    return false;\n  }\n\n  addStartClickListener() {\n    const startButton = document.getElementById(\"start-button\");\n    startButton.onclick = () => {\n      this.name = document.getElementById(\"name-input\").value;\n      this.start(this.name);\n    };\n  }\n\n  addRestartClickListener() {\n    const restartButton = document.getElementById(\"restart-button\");\n    restartButton.onclick = () => {\n      this.start(this.name);\n    };\n  }\n\n  setGameStartScreen() {\n    const canvas = document.getElementById(\"game-canvas\");\n    const startScreen = document.getElementById(\"start-screen\");\n    const restartScreen = document.getElementById(\"restart-screen\");\n    const instructions = document.getElementById(\"instructions\");\n\n    canvas.className = \"\";\n    startScreen.className = \"hidden\";\n    restartScreen.className = \"hidden\";\n    instructions.className= \"hidden\";\n  }\n\n  setGameRestartScreen() {\n    const canvas = document.getElementById(\"game-canvas\");\n    const startScreen = document.getElementById(\"start-screen\");\n    const restartScreen = document.getElementById(\"restart-screen\");\n    const instructions = document.getElementById(\"instructions\");\n\n    canvas.className = \"hidden\";\n    startScreen.className = \"hidden\";\n    restartScreen.className = \"\";\n    instructions.className= \"hidden\";\n  }\n\n  setInstructionsScreen() {\n    const canvas = document.getElementById(\"game-canvas\");\n    const startScreen = document.getElementById(\"start-screen\");\n    const restartScreen = document.getElementById(\"restart-screen\");\n    const instructions = document.getElementById(\"instructions\");\n\n    canvas.className = \"hidden\";\n    startScreen.className = \"\";\n    restartScreen.className = \"hidden\";\n    instructions.classList.toggle(\"hidden\");\n  }\n\n  addInstructionsClickListener() {\n    const instructionsButton = document.getElementById(\"instructions-button\");\n    instructionsButton.onclick = () => {\n      this.setInstructionsScreen();\n    };\n\n    const instructions = document.getElementById(\"instructions\");\n    instructions.onclick = () => {\n      this.setInstructionsScreen();\n    };\n\n    const instructionsBody = document.getElementById(\"instructions-body\");\n    instructionsBody.onclick = e => {\n      e.stopPropagation();\n    };\n  }\n\n  bindKeyHandlers() {\n    Object.keys(GameView.MOVES).forEach(key => {\n      let move = GameView.MOVES[key];\n\n      document.addEventListener('keydown', e => {\n        if (e.key === key) {\n          GameView.KEYS[GameView.MOVES[key]] = true;\n        }\n      }, false);\n\n      document.addEventListener('keyup', e => {\n        if (e.key === key) {\n          GameView.KEYS[GameView.MOVES[key]] = false;\n        }\n      }, false);\n    });\n  }\n\n  getCurrentPlayerOffset(data) {\n    return [\n      CANVAS_X / 2 - data[this.currentPlayerId].pos[0],\n      CANVAS_Y / 2 - data[this.currentPlayerId].pos[1]\n    ];\n  }\n\n  powerCurrentPlayer() {\n    const impulse = 0.5;\n    const allImpulses = [];\n\n    if (GameView.KEYS.up) allImpulses.push([0, -impulse]);\n    if (GameView.KEYS.down) allImpulses.push([0, impulse]);\n    if (GameView.KEYS.left) allImpulses.push([-impulse, 0]);\n    if (GameView.KEYS.right) allImpulses.push([impulse, 0]);\n\n    this.socket.emit(\"move player\", { id: this.currentPlayerId, impulses: allImpulses });\n  }\n}\n\nGameView.MOVES = {\n  \"ArrowLeft\": \"left\",\n  \"ArrowUp\": \"up\",\n  \"ArrowRight\": \"right\",\n  \"ArrowDown\": \"down\"\n};\n\nGameView.KEYS = {\n  up: false,\n  down: false,\n  left: false,\n  right: false\n};\n\nexport default GameView;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/game_view.js\n// module id = 3\n// module chunks = 0","import { CANVAS_X, CANVAS_Y } from './game';\nimport GameView from './game_view';\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  const canvas = document.getElementById(\"game-canvas\");\n  canvas.width = CANVAS_X;\n  canvas.height = CANVAS_Y;\n\n  const context = canvas.getContext(\"2d\");\n  const socket = io();\n\n  const gameView = new GameView(context, socket);\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/pokemania.js\n// module id = 6\n// module chunks = 0","const Util = {\n  dist(pos1, pos2) {\n    return Math.sqrt(\n      Math.pow(pos1[0] - pos2[0], 2) + Math.pow(pos1[1] - pos2[1], 2)\n    );\n  },\n\n  randomRadius() {\n    return Math.floor(Math.random() * (20 - 5)) + 5;\n  },\n\n  randomVelocity() {\n    return [\n      this.randomVelocityPiece(),\n      this.randomVelocityPiece()\n    ];\n  },\n\n  randomVelocityPiece() {\n    return Math.floor(Math.random() * (1.2 + 1.2)) - 1.2;\n  },\n\n  randomPokemonId() {\n    return POKEMON_IDS[Math.floor(Math.random() * POKEMON_IDS.length)];\n  },\n\n  randomPlayerName() {\n    return POKEMON_CHARACTER_NAMES[Math.floor(Math.random() * POKEMON_CHARACTER_NAMES.length)];\n  },\n\n  randomId() {\n    let text = \"\";\n    const possible = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n\n    for (let i = 0; i < 5; i++) {\n      text += possible.charAt(Math.floor(Math.random() * possible.length));\n    }\n\n    return text;\n  },\n\n  DEFAULT_RADIUS: 15\n};\n\nconst POKEMON_IDS = [\n  1, 4, 7, 24, 29, 34, 112, 147, 152, 155, 158, 220, 304\n];\n\nconst POKEMON_CHARACTER_NAMES = [\n  \"Misty\",\n  \"Lass\",\n  \"Beauty\",\n  \"Serena\",\n  \"Bonnie\",\n  \"Iris\",\n  \"Jessie\",\n  \"Lillie\",\n  \"May\",\n  \"Dawn\",\n  \"Moon\",\n  \"Mallow\",\n  \"Sakura\",\n  \"Shauna\",\n  \"Candela\",\n  \"Officer Jenny\",\n  \"Aria\",\n  \"Olivia\",\n  \"Lusamine\",\n  \"Lana\",\n  \"Professor Ivy\",\n  \"Mom\",\n  \"Sabrina\",\n  \"Viola\",\n  \"Daisy\",\n  \"Bianca\",\n  \"Sumomo\",\n  \"Blanche\",\n  \"Agatha\",\n  \"Georgia\",\n  \"Grace\",\n  \"Malva\",\n  \"Karen\"\n];\n\nmodule.exports = Util;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./server/util.js\n// module id = 7\n// module chunks = 0"],"sourceRoot":""}